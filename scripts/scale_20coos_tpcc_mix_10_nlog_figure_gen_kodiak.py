#! /usr/bin/env python

import figure

figure.xxx = [1, 2, 3, 4, 5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]

if __name__ == "__main__":

    cpu = [
            [1.00041614648, 0.999251123315, 0.999667082792, 0.999886518384, 0.999800299551, 0.999682313281, 0.997836947019, 0.998200049759, 0.99689209157, 0.994737525258, 0.996596876539, 0.994375048887, 0.992176924714, 0.989920087982, 0.985792615364], # occ
            [1.0, 0.997957330912, 0.99700449326, 0.996254694387, 0.996095902582, 0.986893064895, 0.977585914288, 0.976907575376, 0.986046992376, 0.994545210086, 0.984303937631, 0.983622800938, 0.764395395342, 0.709183298343, 0.927847619948], # rococo
            #[__2pl.cpu__], # 2pl timeout
            #[__2pl_wait_die.cpu__], # 2pl wait die
            [0.999583853516, 0.999500748877, 0.999833582959, 0.999886518384, 0.999900249526, 0.999958454594, 0.99977538682, 0.999218736144, 0.99723238718, 0.993572229916, 0.990164267274, 0.986480983588, 0.981318485971, 0.969935700135, 0.950732106553] # 2pl wound wait
            ]

    flush_cnt = [
            [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0], # occ
            [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0], # rococo
            #[__2pl.flush_cnt__], # 2pl timeout
            #[__2pl_wait_die.flush_cnt__], # 2pl wait die
            [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0] # 2pl wound wait
            ]

    flush_sz = [
            [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0], # occ
            [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0], # rococo
            #[__2pl.flush_sz__], # 2pl timeout
            #[__2pl_wait_die.flush_sz__], # 2pl wait die
            [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0] # 2pl wound wait
            ]

    throughput_val = [
            [686, 1262, 1751, 2175, 2568, 3816, 3486, 2342, 1388, 764, 616, 353, 227, 183, 130], # occ
            [889, 1703, 2489, 3190, 3916, 6921, 12736, 18056, 23117, 28565, 32257, 36243, 39853, 42898, 46112], # rococo
            #[__2pl.tps__], # 2pl timeout
            #[__2pl_wait_die.tps__], # 2pl wait die
            [659, 1254, 1828, 2329, 2851, 4967, 7830, 9238, 9760, 9774, 9926, 10005, 9802, 9569, 9491] # 2pl wound wait
            ]

    commit_rate_val = [
            [17497.0/25298, 26195.0/37907, 36864.0/53833, 46439.0/68592, 55522.0/83346, 86072.0/141013, 80397.0/212597, 53565.0/269818, 31780.0/318955, 17551.0/369057, 14401.0/416277, 8363.0/467525, 5448.0/528739, 3372.0/489676, 2430.0/555600],
            [18202.0/18202, 35661.0/35661, 53100.0/53100, 69418.0/69418, 86924.0/86924, 168519.0/168519, 374449.0/374449, 486605.0/486605, 740587.0/740587, 585339.0/585339, 906548.0/906548, 1098619.0/1098619, 1385004.0/1385004, 1551901.0/1551901, 815808.0/815808],
            #[__2pl.commit_rate__],
            #[__2pl_wait_die.commit_rate__],
            [16781.0/17728, 26020.0/27782, 38461.0/41363, 49845.0/53998, 61757.0/67527, 115618.0/132162, 150551.0/198398, 189995.0/305355, 208182.0/417481, 285772.0/710397, 302385.0/894751, 308582.0/1064856, 308836.0/1251972, 231502.0/1087444, 233641.0/1221959]
            ]

    latency_50_val = [
            [6.05755280336, 6.86420474169, 7.51552404298, 8.14360281324, 8.64046671006, 11.2397478694, 19.0444262509, 34.9936527904, 61.5051941878, 105.614336494, 153.197896288, 242.656651685, 359.561261103, 439.925358565, 560.912474883],
            [5.49035522474, 5.98103598329, 6.23589017994, 6.51115936277, 6.71512997008, 7.49003119346, 8.1717116919, 8.6188700275, 9.0499173299, 9.35090439666, 9.55442922124, 9.7188248939, 9.87799090827, 9.92172722625, 9.98907777327],
            #[__2pl.latency_50__],
            #[__2pl_wait_die.latency_50__],
            [7.35709067016, 8.09368843002, 8.58841743806, 9.00121293475, 9.34560171469, 10.6759419354, 13.074547285, 15.6746977531, 18.9185491091, 22.9465336183, 27.5250831417, 32.7220840336, 39.3982160062, 47.5700396618, 55.8576870336]
            ]

    latency_90_val = [
            [8.04937277859, 8.87644010348, 9.67063197048, 10.4419598496, 11.2210244326, 15.537383157, 35.8387861886, 84.8390715682, 186.649546205, 401.966823863, 591.105762924, 1145.69451254, 1866.4416966, 2571.73742378, 3526.18132292],
            [6.44117227383, 6.75339098655, 6.92379321274, 7.16875812734, 7.35238297116, 8.1463748001, 8.90926955916, 9.43090537731, 9.9191352712, 10.2615385937, 10.5926730146, 10.891328125, 11.148679749, 11.3238710093, 11.5193463647],
            #[__2pl.latency_90__],
            #[__2pl_wait_die.latency_90__],
            [8.95357263964, 9.55408286152, 9.99639156573, 10.4031958857, 10.8015774864, 12.5209250824, 17.0066000223, 24.2363706724, 35.1139658492, 49.220752726, 63.2511742444, 77.9362650602, 95.6589652801, 115.685136258, 134.555852837]
            ]

    latency_99_val = [
            [9.67797603504, 10.6043134197, 11.4920663897, 12.4426286843, 13.3922374936, 18.7519097985, 48.7093014606, 124.538352665, 300.637899684, 696.343485373, 1030.89446922, 2142.90470412, 3267.92444782, 4206.26899367, 5364.22073886],
            [6.73865338865, 6.99511386812, 7.1306627677, 7.36671651247, 7.54182249708, 8.35542859915, 9.18719406421, 9.79956029956, 10.2579944421, 10.6255163036, 11.1424312408, 11.6120564499, 11.9354416641, 12.1977457121, 12.4235925862],
            #[__2pl.latency_99__],
            #[__2pl_wait_die.latency_99__],
            [9.69620639886, 10.3259292319, 10.8060633269, 11.270495038, 11.7223804073, 13.8853860687, 19.8778318658, 29.8366732356, 44.475938957, 62.8579881971, 80.3770038002, 98.6757866979, 120.59229358, 145.090163532, 168.145687501]
            ]

    latency_999_val = [
            [10.0421995653, 10.9868631762, 11.8956745749, 12.8841466692, 13.8614146786, 19.4579850694, 52.5021375041, 135.326141503, 334.030093116, 787.300287705, 1161.06316296, 2363.08589986, 3536.39794168, 4442.37543015, 5614.21079496],
            [6.78257737954, 7.04019101563, 7.18647475297, 7.45012294833, 7.62527052638, 8.79609348606, 9.78657684777, 10.4487398784, 10.8549868804, 10.9746960845, 11.8682492474, 12.3656210636, 12.6869871977, 12.940466784, 12.8790065188],
            #[__2pl.latency_999__],
            #[__2pl_wait_die.latency_999__],
            [9.8335488569, 10.4792684851, 10.9687729704, 11.4539496506, 11.9230597795, 14.2015166252, 20.5064419134, 30.9561840683, 46.2982958939, 65.4365724459, 83.5512798414, 102.507155853, 125.233214561, 150.467069913, 174.292370369]
            ]

    n_try_50_val = [
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.02786208269, 1.34448510193, 1.94373820013, 2.95282051282, 3.82, 5.66634776369, 8.18171806167, 10.7924080664, 15.2395061728],
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
            #[__2pl.n_try_50__],
            #[__2pl_wait_die.n_try_50__],
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.08323418669, 1.2290465104, 1.35189349994, 1.58999598492, 1.85855845738, 2.12887348057]
            ]

    n_try_90_val = [
            [1.15666476154, 1.16636267232, 1.18419386925, 1.19423376002, 1.21481318417, 1.31196426727, 1.8765841591, 3.16304347826, 5.63376686945, 10.6491294714, 14.3494598765, 25.8607494021, 40.9534978585, 59.4110085695, 85.1856424326],
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
            #[__2pl.n_try_90__],
            #[__2pl_wait_die.n_try_90__],
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.02276658722, 1.13685375844, 1.31962922892, 1.59734846261, 1.95723072856, 2.333343132, 2.72545305934, 3.21211576099, 3.75749576436, 4.22138998269]
            ]

    n_try_99_val = [
            [1.38575222261, 1.38900242934, 1.40386354295, 1.41917170575, 1.44312847942, 1.57046625436, 2.46290502934, 4.56587904731, 8.94103998474, 18.1164316547, 24.7829685746, 47.8038410436, 71.2807342852, 97.3142600359, 130.005405405],
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
            #[__2pl.n_try_99__],
            #[__2pl_wait_die.n_try_99__],
            [1.04556672485, 1.05473814977, 1.06116713941, 1.06760426377, 1.0763506109, 1.11989236509, 1.28139823543, 1.55278981366, 1.93002911208, 2.39222166453, 2.84811648812, 3.32390604132, 3.90578484826, 4.53306048362, 5.05802753087]
            ]

    n_try_999_val = [
            [1.43658104011, 1.43820697035, 1.45176093627, 1.46807639248, 1.4921393286, 1.62767924638, 2.61081229145, 4.94216142475, 9.90027718281, 20.3959961216, 27.8866258863, 52.6612401245, 77.2021315693, 102.972090261, 136.52039555],
            [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
            #[__2pl.n_try_999__],
            #[__2pl_wait_die.n_try_999__],
            [1.05428298735, 1.06555611126, 1.07287491541, 1.08061050306, 1.09047734825, 1.13929628924, 1.31222074468, 1.59919390954, 1.99401845432, 2.47285330979, 2.94233022822, 3.43213320661, 4.03127765155, 4.67201539326, 5.20704177681]
            ]

    att_latency_50_val = [
            [5.67356692213, 6.53106173876, 7.17651212083, 7.82151514315, 8.29882400063, 10.736540949, 16.5305784881, 23.8566292129, 29.8010706772, 33.7179276157, 37.6295904556, 40.3759540119, 41.0925811791, 38.9949870712, 36.4515489106],
            [5.49216587849, 5.98276790292, 6.23755927422, 6.51281333479, 6.71679593691, 7.4916900018, 8.17341334517, 8.62062541527, 9.05173731102, 9.3528035431, 9.55644452192, 9.72096208182, 9.880266953, 9.92416060775, 9.99177634824],
            #[__2pl.att_latency_50__],
            #[__2pl_wait_die.att_latency_50__],
            [7.24328222171, 7.95155814832, 8.41939968959, 8.81883480674, 9.13491072247, 10.4166783747, 12.5983313376, 14.7871516159, 16.9862026184, 18.7712029917, 19.8876757818, 20.588867912, 20.8735766194, 20.5493901111, 20.1437418267]
            ]

    att_latency_90_val = [
            [6.61425175402, 7.34569016514, 7.92791335468, 8.53100661475, 9.03402793892, 11.6395767753, 18.8565577333, 26.5281465329, 32.7374883949, 37.3768883484, 40.6099915217, 43.7143550887, 44.7037113382, 42.4860311259, 41.2460894134],
            [6.44296934019, 6.75512364406, 6.92546814821, 7.17041855791, 7.35404927594, 8.14803726693, 8.91097833345, 9.43267385711, 9.92097224802, 10.2634752765, 10.5947580997, 10.893561275, 11.1511126806, 11.3265224231, 11.5224727401],
            #[__2pl.att_latency_90__],
            #[__2pl_wait_die.att_latency_90__],
            [8.67121218613, 9.23161363215, 9.62856935483, 9.99704823847, 10.3212924048, 11.7435942381, 14.5529437017, 17.8293018852, 21.3291026353, 24.2828203598, 26.0852160186, 27.4224949868, 28.4526235717, 29.284336001, 30.190049525]
            ]

    att_latency_99_val = [
            [6.93563257036, 7.60077668558, 8.15718128833, 8.74346012606, 9.2550607311, 11.9120722403, 20.0572689242, 27.2899952181, 33.5886360222, 38.4106127706, 41.5794975924, 44.8130535994, 45.8928330452, 43.6468221935, 42.5126322977],
            [6.74045097037, 6.99685099809, 7.13233860646, 7.36837798884, 7.54348895105, 8.35709190109, 9.18890440659, 9.80133259078, 10.2598395484, 10.6274770416, 11.1445677168, 11.6144167055, 11.9380827061, 12.2007024111, 12.4271940084],
            #[__2pl.att_latency_99__],
            #[__2pl_wait_die.att_latency_99__],
            [9.21907296118, 9.73894687584, 10.1291032009, 10.5049926799, 10.8365628266, 12.350678203, 15.462600536, 19.1314221112, 22.9551499821, 26.1658122326, 28.0918352781, 29.5427979627, 30.7244584552, 31.8177661685, 33.0319462936]
            ]

    att_latency_999_val = [
            [6.98432881306, 7.63844008679, 8.19196467418, 8.77491729724, 9.28749812281, 11.9531252201, 20.2233795826, 27.4005292369, 33.716870702, 38.5636528837, 41.7085674262, 44.9629342309, 46.0571468435, 43.805658421, 42.7057961195],
            [6.78437534373, 7.04192868695, 7.18815092661, 7.45178470853, 7.62693731042, 8.79775777102, 9.78828908693, 10.450514363, 10.8568341108, 10.9766572916, 11.8703868445, 12.3679818906, 12.689626077, 12.9434188752, 12.8826087176],
            #[__2pl.att_latency_999__],
            #[__2pl_wait_die.att_latency_999__],
            [9.31876156601, 9.82985049558, 10.2160041285, 10.5962716263, 10.9294748817, 12.4648625558, 15.6248132364, 19.3489299551, 23.2088357047, 26.4516775984, 28.3877127214, 29.8509342324, 31.0520401466, 32.1890986827, 33.4470163335]
            ]

    latency_min_val = [
            [3.09716796875, 3.77734375, 3.80493164062, 4.71923828125, 5.14916992188, 5.45385742188, 3.03588867188, 4.41918945312, 4.15087890625, 3.4189453125, 4.47143554688, 3.07641601562, 3.59985351562, 3.58471679688, 4.0048828125],
            [2.556640625, 1.33935546875, 1.26831054688, 1.1494140625, 1.15185546875, 0.8662109375, 1.00268554688, 0.87158203125, 0.96142578125, 1.01318359375, 0.895751953125, 0.895751953125, 0.89111328125, 0.901611328125, 1.0537109375],
            #[__2pl.min_latency__],
            #[__2pl_wait_die.min_latency__],
            [3.39575195312, 4.26147460938, 4.9482421875, 5.38305664062, 5.44873046875, 6.447265625, 6.73803710938, 6.15966796875, 4.9990234375, 3.15454101562, 3.31567382812, 2.30810546875, 2.55249023438, 1.38500976562, 1.45092773438]
            ]

    latency_max_val = [
            [98.4367675781, 104.395751953, 116.973388672, 138.177978516, 176.908447266, 235.68359375, 2498.78613281, 4924.50732422, 12564.3061523, 26194.0708008, 29914.5869141, 40481.6025391, 40266.6984863, 34484.5097656, 36234.9304199],
            [21.1708984375, 43.0327148438, 45.8747558594, 48.8784179688, 47.7333984375, 104.340576172, 196.378417969, 215.312744141, 224.342529297, 138.031982422, 253.125244141, 245.875976562, 269.922363281, 272.948730469, 135.224853516],
            #[__2pl.max_latency__],
            #[__2pl_wait_die.max_latency__],
            [48.0280761719, 49.0422363281, 63.5300292969, 73.388671875, 94.1728515625, 145.067382812, 194.381591797, 428.24609375, 525.268554688, 888.826660156, 1257.82714844, 1715.87231445, 1488.46435547, 1757.99804688, 1687.67138672]
            ]

    attempts_val = [
            [25298.0/25.5164883272, 37907.0/20.7550700298, 53833.0/21.0485816385, 68592.0/21.3495792055, 83346.0/21.6193476849, 141013.0/22.5545156842, 212597.0/23.0603165383, 269818.0/22.8732933368, 318955.0/22.8908367444, 369057.0/22.960861529, 416277.0/23.3631389104, 467525.0/23.6945769209, 528739.0/23.9794727066, 489676.0/18.3814660822, 555600.0/18.698864551],
            [18202.0/20.4838804698, 35661.0/20.9422283379, 53100.0/21.3316431989, 69418.0/21.7637149676, 86924.0/22.195928615, 168519.0/24.3495313907, 374449.0/29.4000871138, 486605.0/26.9495182856, 740587.0/32.0366223452, 585339.0/20.4916444739, 906548.0/28.103847389, 1098619.0/30.3127231116, 1385004.0/34.7525100821, 1551901.0/36.1769377341, 815808.0/17.6917948576],
            #[__2pl.attempts__],
            #[__2pl_wait_die.attempts__],
            [17728.0/25.4812851968, 27782.0/20.752643566, 41363.0/21.036746761, 53998.0/21.3995427066, 67527.0/21.6591164829, 132162.0/23.2791500248, 198398.0/19.2286736751, 305355.0/20.5665033129, 417481.0/21.3295143312, 710397.0/29.2366184616, 894751.0/30.4641494413, 1064856.0/30.8431930902, 1251972.0/31.5064704198, 1087444.0/24.1919492184, 1221959.0/24.6171800922]
            ]

    graph_size_val = [
            [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
            ]

    n_ask_val = [
            [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
            ]

    scc_val = [
            [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
            ]

    throughput_figname =            "fig/kodiak/scale_20coos_tpcc_mix_10_nlog_ct_tp.pdf"
    tpcc_ct_cpu_figname =           "fig/kodiak/scale_20coos_tpcc_mix_10_nlog_ct_cpu.pdf"

    figure.tpcc_sc_tp(throughput_val, throughput_figname);
    figure.tpcc_sc_cpu(cpu, tpcc_ct_cpu_figname);

#    print("Hello")
